{% extends 'base.html' %}
{% block title %}
Admin User Page
{% endblock %}

{% block content %}
    <div class="container">
        <h1> Admin Users....</h1>
        <br>
        <form method="post" style="color:white" autocomplete="off">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <div class="row g-3 ">
                <div class="col-2 ">
                     {{ form.user_firstname.label() }}
                </div>
            </div>
             <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.user_firstname()}}
                </div>
            </div>
            <br>
            <div class="row g-3 ">
                 {{ form.user_lastname.label() }}
            </div>

             <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.user_lastname()}}
                </div>
            </div>
           <br>
            <div class="row g-3 ">
                <div class="col-2 ">
                    {{ form.user_so_name.label() }}
                </div>
            </div>
            <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.user_so_name()}}
                </div>

            </div>

           <br>
            <div class="row g-3 ">
                <div class="col-2 ">
                    {{ form.user_pass.label() }}
                </div>
            </div>
            <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.user_pass()}}
                </div>

            </div>
            <br>

            <div class="row g-3 ">
                <div class="col-2 ">
                    {{ form.id_admin_role.label() }}
                </div>
            </div>
            <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.id_admin_role() }}
                </div>
            </div>
             <br>
            <div class="row g-3 ">
                <div class="col-2 ">
                    {{ form.user_email.label() }}
                </div>
            </div>
            <div class="row g-3 ">
                 <div class="col-auto">
                     {{ form.user_email() }}
                </div>
            </div>
            <br>
            <div class="d-grid gap-2 d-md-block">
                {{ form.submit(type="submit",value='Add Admin', class="btn   btn-primary") }}
            </div>
        </form>
         <br><br>
        <div class="container">
            <table class="table-dark">
               <thead>
                   <tr>
                       <th class="col-2"> ID</th>
                       <th class="col-2"> Firstname</th>
                       <th class="col-2"> Lastname</th>
                       <th class="col-2"> Admin</th>
                       <th class="col-2"> Delete </th>
                   </tr>
               </thead>

               <tbody>
               {% for user, admin_roles in admins %}<tr>
                    <td>{{ user.id_user }}</td>
                    <td>{{ user.user_firstname }}</td>
                    <td>{{ user.user_lastname }}</td>
                    <td> {{ admin_roles.admin_role_name}}</td>
                    {% if current_user.id_user != user.id_user %}
                        <td><a href="{{ url_for('admins.deleteuser',xid=user.id_user)}}">Delete</a> </td>
                    {% else %}
                        <td>can't delete yourself </td>
                    {% endif %}

                </tr>
                {% endfor %}
               </tbody>
            </table>
        </div>
    </div>
{% endblock %}